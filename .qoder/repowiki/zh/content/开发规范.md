# 开发规范

<cite>
**本文档中引用的文件**  
- [eslint.config.js](file://web/eslint.config.js)
- [stylelint.config.js](file://web/stylelint.config.js)
- [commitlint.config.js](file://web/commitlint.config.js)
- [.husky/common.sh](file://web/.husky/common.sh)
- [.github/workflows/linter.yml](file://web/.github/workflows/linter.yml)
- [package.json](file://web/package.json)
- [tsconfig.json](file://web/tsconfig.json)
- [vite.config.ts](file://web/vite.config.ts)
- [README.md](file://web/README.md)
</cite>

## 目录
1. [简介](#简介)
2. [代码风格规范](#代码风格规范)
   - [ESLint 配置](#eslint-配置)
   - [Stylelint 配置](#stylelint-配置)
3. [提交信息规范](#提交信息规范)
4. [目录结构与命名约定](#目录结构与命名约定)
5. [开发环境配置](#开发环境配置)
6. [持续集成与自动化](#持续集成与自动化)
7. [最佳实践与建议](#最佳实践与建议)

## 简介

本开发规范文档旨在为 `vue-pure-admin` 项目提供统一的开发标准，涵盖代码风格、提交信息、目录结构和开发环境配置等方面。通过遵循本规范，团队成员可以确保代码质量、提升协作效率，并维护项目的一致性和可维护性。

**Section sources**
- [README.md](file://web/README.md#L1-L238)

## 代码风格规范

### ESLint 配置

项目采用 `ESLint` 作为 JavaScript/TypeScript 的静态代码分析工具，结合 `typescript-eslint` 和 `eslint-plugin-vue` 插件，确保代码符合现代前端开发的最佳实践。配置文件位于 `eslint.config.js`，主要特点包括：

- 基于 `@eslint/js` 推荐规则集
- 集成 `typescript-eslint` 进行 TypeScript 类型检查
- 使用 `eslint-plugin-vue` 支持 Vue 3 单文件组件
- 集成 `prettier` 以统一代码格式化
- 自定义全局变量，避免误报未定义变量错误
- 忽略特定目录和文件类型（如 `dist/`, `*.d.ts`, `public/` 等）

关键规则包括禁用 `debugger`、严格检查未使用变量（忽略以 `_` 开头的变量）、强制使用自动换行符等。

**Section sources**
- [eslint.config.js](file://web/eslint.config.js#L0-L173)
- [package.json](file://web/package.json#L100-L103)

### Stylelint 配置

项目使用 `Stylelint` 来规范 CSS、SCSS 和 Vue 文件中的样式代码。配置文件位于 `stylelint.config.js`，主要特性如下：

- 继承 `stylelint-config-standard` 和 `stylelint-config-recess-order` 标准配置
- 支持 Vue 和 HTML 文件中的样式检查
- 针对 SCSS 语法使用 `postcss-scss` 解析器
- 允许使用 Tailwind CSS 相关的 `@` 规则（如 `@apply`, `@tailwind` 等）
- 支持 `rpx` 单位（常用于移动端适配）
- 使用 `stylelint-order` 插件强制样式属性排序
- 忽略 JavaScript/TypeScript 文件的样式检查

该配置确保了样式代码的一致性和可读性，同时兼容项目中使用的 Tailwind CSS 框架。

**Section sources**
- [stylelint.config.js](file://web/stylelint.config.js#L0-L87)
- [package.json](file://web/package.json#L150-L156)

## 提交信息规范

项目采用 `commitlint` 工具来规范 Git 提交信息，确保提交历史清晰、可追溯。配置文件位于 `commitlint.config.js`，基于 `@commitlint/config-conventional` 传统规范，并进行了定制化调整。

### 提交类型（type-enum）

提交信息的类型必须从以下列表中选择：
- `feat`：新增功能
- `fix`：修复问题/BUG
- `perf`：性能优化
- `style`：代码风格调整（不影响运行）
- `docs`：文档更新
- `test`：测试相关
- `refactor`：代码重构
- `build`：构建系统变更
- `ci`：CI/CD 配置变更
- `chore`：杂项任务（如依赖更新）
- `revert`：撤销更改
- `wip`：正在进行的工作
- `workflow`：工作流改进
- `types`：类型定义变更
- `release`：版本发布

### 其他规则

- 提交标题（header）最大长度为 108 个字符
- 主题（subject）和类型（type）不能为空
- 正文（body）前必须有空行
- 允许忽略包含 "init" 的提交信息

这些规则通过 `Husky` 钩子在提交时自动验证，确保所有提交符合规范。

**Section sources**
- [commitlint.config.js](file://web/commitlint.config.js#L0-L35)
- [README.md](file://web/README.md#L210-L230)

## 目录结构与命名约定

项目遵循清晰的目录结构和命名约定，便于团队成员快速定位和理解代码。

### 核心目录

- `src/`：源代码主目录
  - `api/`：API 接口定义
  - `components/`：可复用的 Vue 组件
  - `layout/`：页面布局组件
  - `router/`：路由配置
  - `store/`：Pinia 状态管理
  - `style/`：全局样式文件
  - `utils/`：工具函数
  - `views/`：页面视图组件
- `build/`：构建配置和脚本
- `mock/`：模拟数据
- `locales/`：国际化语言包
- `types/`：TypeScript 类型定义
- `public/`：静态资源

### 命名约定

- 文件夹和文件名采用小写字母和连字符（kebab-case），如 `user-profile.vue`
- 组件文件夹通常包含 `src/` 子目录存放实现细节
- TypeScript 文件使用 `.ts` 或 `.tsx` 扩展名
- 样式文件使用 `.scss` 或 `.css` 扩展名
- 配置文件遵循标准命名（如 `vite.config.ts`, `tsconfig.json`）

这种结构化组织方式提高了项目的可维护性和可扩展性。

**Section sources**
- [项目结构](file://web/#L1-L1000)
- [README.md](file://web/README.md#L1-L238)

## 开发环境配置

项目使用现代前端工具链，确保开发体验高效且一致。

### 依赖管理

- 使用 `pnpm` 作为包管理器，通过 `package.json` 中的 `engines` 字段强制要求 `pnpm >= 9`
- 安装脚本中包含 `preinstall` 钩子，防止使用其他包管理器
- `pnpm` 配置中指定了仅构建特定依赖，优化安装速度

### 开发脚本

`package.json` 中定义了标准化的开发脚本：
- `pnpm dev`：启动开发服务器
- `pnpm build`：生产环境打包
- `pnpm lint`：执行代码检查（ESLint + Prettier + Stylelint）
- `pnpm typecheck`：进行 TypeScript 类型检查

### 编辑器配置

建议开发者在编辑器中集成以下工具：
- ESLint 插件：实时代码检查
- Prettier 插件：保存时自动格式化
- Volar：Vue 3 语言支持
- Stylelint 插件：样式代码检查

此外，项目根目录的 `tsconfig.json` 配置了路径别名 `@/*` 指向 `src/` 目录，提升导入体验。

**Section sources**
- [package.json](file://web/package.json#L0-L209)
- [tsconfig.json](file://web/tsconfig.json#L0-L54)
- [vite.config.ts](file://web/vite.config.ts#L0-L62)

## 持续集成与自动化

项目通过 GitHub Actions 实现持续集成，确保代码质量。

### Lint 工作流

`.github/workflows/linter.yml` 定义了代码检查工作流，在 `main` 分支的 `push` 和 `pull_request` 事件触发时执行：
1. 检出代码
2. 安装 Node.js 和 pnpm
3. 配置 pnpm 缓存
4. 安装依赖并运行 `pnpm lint` 和 `pnpm typecheck`

该工作流确保所有合并到主分支的代码都通过了代码风格和类型检查。

### Git Hooks

使用 `Husky` 配置 Git 钩子，在本地提交时自动运行代码检查：
- `pre-commit` 钩子执行 `lint-staged`，仅检查暂存区的文件
- `commit-msg` 钩子使用 `commitlint` 验证提交信息格式

`.husky/common.sh` 提供了 Windows 环境下的兼容性支持。

**Section sources**
- [.github/workflows/linter.yml](file://web/.github/workflows/linter.yml#L0-L52)
- [.husky/common.sh](file://web/.husky/common.sh#L0-L9)
- [package.json](file://web/package.json#L97-L98)

## 最佳实践与建议

为确保项目长期健康发展，建议团队成员遵循以下最佳实践：

1. **提交前检查**：在提交代码前，务必运行 `pnpm lint` 和 `pnpm typecheck`，确保本地通过所有检查。
2. **小步提交**：保持提交粒度适中，每个提交应聚焦于单一功能或修复。
3. **有意义的提交信息**：编写清晰、具体的提交信息，便于后续追溯和理解变更意图。
4. **组件复用**：在 `components/` 目录中寻找可复用的组件，避免重复造轮子。
5. **类型安全**：充分利用 TypeScript 的类型系统，为函数、组件 props 等添加明确的类型注解。
6. **文档更新**：当修改公共 API 或重要功能时，同步更新相关文档。
7. **性能意识**：关注组件渲染性能，合理使用 `v-memo`、`keep-alive` 等优化手段。

通过遵循这些实践，团队可以共同维护一个高质量、易维护的代码库。

**Section sources**
- [README.md](file://web/README.md#L1-L238)
- [package.json](file://web/package.json#L100-L103)